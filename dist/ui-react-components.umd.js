!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).UIReactComponents={},e.React)}(this,function(e,r){"use strict";var t,l={exports:{}},s={};l.exports=function(){if(t)return s;t=1;var e=r,l=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var s,n={},d=null,c=null;for(s in void 0!==t&&(d=""+t),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(c=r.ref),r)a.call(r,s)&&!i.hasOwnProperty(s)&&(n[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps)void 0===n[s]&&(n[s]=r[s]);return{$$typeof:l,type:e,key:d,ref:c,props:n,_owner:o.current}}return s.Fragment=n,s.jsx=d,s.jsxs=d,s}();var n=l.exports;const a=({value:e,options:t,mode:l="edit",multiple:s=!1,searchable:a=!1,required:o=!1,placeholder:i="Select...",error:d,onChange:c})=>{const[u,x]=r.useState(e),[h,f]=r.useState(!1),[m,g]=r.useState(""),p=r.useRef(null),y=r.useRef(null),b="readonly"===l,v="disabled"===l;r.useEffect(()=>{x(e)},[e]),r.useEffect(()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&(f(!1),g(""))};if(h)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[h]),r.useEffect(()=>{h&&a&&y.current&&y.current.focus()},[h,a]);const j=(()=>{if(!u||Array.isArray(u)&&0===u.length)return i;if(Array.isArray(u)){const e=t.filter(e=>u.includes(e.value)).map(e=>e.label);return e.length>0?e.join(", "):i}const e=t.find(e=>e.value===u);return e?.label||i})(),w=m?t.filter(e=>e.label.toLowerCase().includes(m.toLowerCase())):t;return b?n.jsx("div",{className:"text-sm text-gray-900",children:j}):n.jsxs("div",{ref:p,className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>!v&&f(!h),disabled:v,className:`\n                    w-full px-3 py-2 text-left text-sm\n                    bg-white border rounded-lg shadow-sm\n                    flex items-center justify-between gap-2\n                    transition-colors duration-150\n                    ${v?"bg-gray-50 text-gray-500 cursor-not-allowed border-gray-200":d?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}\n                    ${o&&!u?"border-red-300":""}\n                `,children:[n.jsx("span",{className:"flex-1 truncate "+(!u||Array.isArray(u)&&0===u.length?"text-gray-400":"text-gray-900"),children:j}),n.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${h?"rotate-180":""} ${v?"text-gray-400":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&n.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-red-600",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),d]}),h&&!v&&n.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-xl",children:[a&&n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),n.jsx("input",{ref:y,type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"Search...",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:0===w.length?n.jsx("div",{className:"px-3 py-8 text-center text-sm text-gray-500",children:"No options found"}):w.map(e=>{const r=(t=e.value,Array.isArray(u)?u.includes(t):u===t);var t;const l=e.disabled;return n.jsxs("button",{type:"button",onClick:()=>!l&&(e=>{if(!v)if(s){const r=Array.isArray(u)?u:[],t=r.includes(e)?r.filter(r=>r!==e):[...r,e],l=t.length>0?t:null;x(l),c?.(l)}else x(e),c?.(e),f(!1),g("")})(e.value),disabled:l,className:`\n                                            w-full px-3 py-2 text-left text-sm\n                                            flex items-center gap-2\n                                            transition-colors duration-100\n                                            ${l?"text-gray-400 cursor-not-allowed":r?"bg-blue-50 text-blue-900":"text-gray-900 hover:bg-gray-50"}\n                                        `,children:[s?n.jsx("div",{className:`\n                                                w-4 h-4 border rounded flex items-center justify-center flex-shrink-0\n                                                ${r?"bg-blue-600 border-blue-600":"border-gray-300 bg-white"}\n                                            `,children:r&&n.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):n.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:r&&n.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),n.jsx("span",{className:"flex-1 truncate",children:e.label})]},e.value)})})]})]})},o=({value:e,mode:t="edit",type:l="text",required:s=!1,placeholder:a="",error:o,maxLength:i,minLength:d,pattern:c,autoComplete:u,autoFocus:x=!1,multiline:h=!1,rows:f=3,onChange:m,onBlur:g,onFocus:p})=>{const[y,b]=r.useState(e),[v,j]=r.useState(!1),w=r.useRef(null),N=r.useRef(null),k="readonly"===t,C="disabled"===t;r.useEffect(()=>{b(e)},[e]);const L=e=>{if(C||k)return;const r=e.target.value,t=""===r?null:r;b(t),m?.(t)},R=()=>{j(!0),p?.()},$=()=>{j(!1),g?.()};if(k)return n.jsx("div",{className:"text-sm text-gray-900",children:h?n.jsx("div",{className:"whitespace-pre-wrap",children:y||"-"}):n.jsx("span",{children:y||"-"})});const z=`\n        w-full px-3 py-2 text-sm\n        bg-white border rounded-lg shadow-sm\n        transition-colors duration-150\n        ${C?"bg-gray-50 text-gray-500 cursor-not-allowed border-gray-200":o?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":v?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400"}\n        ${s&&!y?"border-red-300":""}\n        focus:outline-none\n    `;return n.jsxs("div",{className:"relative",children:[h?n.jsx("textarea",{ref:N,value:y||"",onChange:L,onFocus:R,onBlur:$,placeholder:a,disabled:C,required:s,maxLength:i,minLength:d,rows:f,autoFocus:x,className:`${z} resize-y`}):n.jsx("input",{ref:w,type:l,value:y||"",onChange:L,onFocus:R,onBlur:$,placeholder:a,disabled:C,required:s,maxLength:i,minLength:d,pattern:c,autoComplete:u,autoFocus:x,className:z}),i&&!C&&n.jsxs("div",{className:"mt-1 text-xs text-right text-gray-500",children:[(y||"").length," / ",i]}),o&&n.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-red-600",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),o]})]})},i=({value:e,mode:t="edit",required:l=!1,placeholder:s="Enter name...",error:a,maxLength:o,link:i=!1,recordId:d,module:c,showFocusIcon:u=!1,onLinkClick:x,onFocusClick:h,onChange:f,onBlur:m,onFocus:g})=>{const[p,y]=r.useState(e),[b,v]=r.useState(!1),j=r.useRef(null),w="readonly"===t,N="disabled"===t,k="edit"===t;r.useEffect(()=>{y(e)},[e]);const C=e=>{if(N||w)return;const r=e.target.value,t=""===r?null:r;y(t),f?.(t)},L=()=>{v(!0),g?.()},R=()=>{v(!1),m?.()},$=e=>{e.preventDefault(),d&&c&&x&&x(d,c)},z=e=>{e.preventDefault(),e.stopPropagation(),d&&c&&h&&h(d,c)},S=e=>{"Enter"===e.key&&d&&c&&h&&(e.preventDefault(),h(d,c))};if(w||N&&p){const e=p||"-",r=i&&d&&c&&!N,t=u&&d&&c&&p&&!N;return n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[r?n.jsx("a",{href:"#",onClick:$,className:"text-blue-600 hover:text-blue-800 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 rounded","data-link-target":"focus","data-module":c,"data-model-id":d,children:e}):n.jsx("span",{children:e}),t&&n.jsx("div",{className:"focus-icon-container",children:n.jsx("button",{type:"button",onClick:z,onKeyUp:S,className:"focus-icon inline-flex items-center justify-center w-5 h-5 text-gray-500 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded transition-colors","aria-label":"Open in focus drawer",tabIndex:0,children:n.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]})}if(k){const e=`\n            w-full px-3 py-2 text-sm\n            bg-white border rounded-lg shadow-sm\n            transition-colors duration-150\n            ${a?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":b?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400"}\n            ${l&&!p?"border-red-300":""}\n            focus:outline-none\n        `;return n.jsxs("div",{className:"relative",children:[n.jsx("input",{ref:j,type:"text",value:p||"",onChange:C,onFocus:L,onBlur:R,placeholder:s,required:l,maxLength:o,className:e}),o&&n.jsxs("div",{className:"mt-1 text-xs text-right text-gray-500",children:[(p||"").length," / ",o]}),a&&n.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-red-600",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a]})]})}return n.jsx("div",{className:"relative",children:n.jsx("input",{type:"text",value:"",disabled:!0,placeholder:s,className:"w-full px-3 py-2 text-sm bg-gray-50 text-gray-500 cursor-not-allowed border border-gray-200 rounded-lg shadow-sm focus:outline-none"})})};e.EnumField=a,e.ListView=({columns:e,rows:t,selectable:l=!1,multiSelect:s=!0,selectedIds:d=[],sort:c,loading:u=!1,emptyMessage:x="No data available",hoverable:h=!0,clickableRows:f=!1,className:m="",showHeader:g=!0,maxHeight:p,onSelectionChange:y,onRowClick:b,onRowDoubleClick:v,onSortChange:j,onColumnHeaderClick:w,onRowAction:N})=>{const[k,C]=r.useState(d),L=r.useRef(null);r.useEffect(()=>{C(d)},[d]);const R=e.filter(e=>!1!==e.visible),$=t.length>0&&t.every(e=>e.disabled||k.includes(e.id)),z=k.length>0&&!$&&t.some(e=>k.includes(e.id)),S=(e,r,t)=>{const l=r.data[e.key];if(e.render)return e.render(l,r.data,t);if(null==l)return n.jsx("span",{className:"text-gray-400",children:"-"});switch(e.type){case"enum":return n.jsx(a,{value:l,options:e.options||[],mode:"readonly",...e.fieldProps||{}});case"name":case"relate":return n.jsx(i,{value:l,mode:"readonly",link:"name"===e.type||"relate"===e.type,recordId:r.data[`${e.key}_id`],module:r.data[`${e.key}_module`],onLinkClick:e.fieldProps?.onLinkClick||((e,l)=>{N?.("navigate",r,t)}),...e.fieldProps||{}});case"email":case"phone":case"url":case"text":return n.jsx(o,{value:l,mode:"readonly",type:"email"===e.type?"email":"phone"===e.type?"tel":"url"===e.type?"url":"text",...e.fieldProps||{}});default:return n.jsx("div",{className:"text-sm text-gray-900",children:String(l)})}},B=e=>{if(e.width)return"number"==typeof e.width?`${e.width}px`:e.width};return u?n.jsx("div",{className:"w-full p-8 text-center",children:n.jsxs("div",{className:"inline-flex items-center gap-2 text-gray-600",children:[n.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n.jsx("span",{children:"Loading..."})]})}):0===t.length?n.jsx("div",{className:"w-full p-8 text-center",children:n.jsx("div",{className:"text-gray-500",children:x})}):n.jsx("div",{ref:L,className:`w-full overflow-auto ${m}`,style:{maxHeight:p?"number"==typeof p?`${p}px`:p:void 0},children:n.jsxs("table",{className:"w-full border-collapse",children:[g&&n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsxs("tr",{className:"border-b border-gray-200",children:[l&&n.jsx("th",{className:"w-12 px-4 py-3 text-left",children:s&&n.jsx("input",{type:"checkbox",checked:$,ref:e=>{e&&(e.indeterminate=z)},onChange:()=>{if($)C([]),y?.([]);else{const e=t.filter(e=>!e.disabled).map(e=>e.id);C(e),y?.(e)}},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})}),R.map(r=>n.jsx("th",{style:{width:B(r)},className:`px-4 py-3 text-sm font-semibold text-gray-700 ${"center"===r.align?"text-center":"right"===r.align?"text-right":"text-left"} ${r.sortable?"cursor-pointer hover:bg-gray-100":""}`,onClick:()=>{r.sortable&&(r=>{const t=e.find(e=>e.key===r);if(!t?.sortable)return;const l=c?.columnKey===r&&"asc"===c.direction?"desc":"asc";j?.({columnKey:r,direction:l})})(r.key),w?.(r)},children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:r.label}),r.sortable&&n.jsx("span",{className:"text-gray-400",children:c?.columnKey===r.key?"asc"===c.direction?n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}):n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}):n.jsx("svg",{className:"w-4 h-4 opacity-0 group-hover:opacity-100",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M5 12a1 1 0 102 0V6.414l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L5 6.414V12zM15 8a1 1 0 10-2 0v5.586l-1.293-1.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L15 13.586V8z"})})})]})},r.key))]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e,r)=>{const a=k.includes(e.id),o=f&&!e.disabled;return n.jsxs("tr",{className:`\n                                    ${h&&!e.disabled?"hover:bg-gray-50":""}\n                                    ${a?"bg-blue-50":""}\n                                    ${o?"cursor-pointer":""}\n                                    ${e.disabled?"opacity-50 cursor-not-allowed":""}\n                                    ${e.className||""}\n                                `,onClick:t=>((e,r,t)=>{if(e.disabled)return;const l=t.target;l.closest('input[type="checkbox"]')||l.closest("button")||l.closest("a")||b?.(e,r)})(e,r,t),onDoubleClick:()=>((e,r)=>{e.disabled||v?.(e,r)})(e,r),children:[l&&n.jsx("td",{className:"w-12 px-4 py-3",children:n.jsx("input",{type:"checkbox",checked:a,disabled:e.disabled,onChange:r=>((e,r)=>{let l;if(s&&r?.shiftKey){const r=t.findIndex(r=>r.id===e),s=t.findIndex(e=>k.includes(e.id));if(s>=0){const e=Math.min(r,s),n=Math.max(r,s),a=t.slice(e,n+1).filter(e=>!e.disabled).map(e=>e.id);l=Array.from(new Set([...k,...a]))}else l=[e]}else l=s&&(r?.ctrlKey||r?.metaKey)||s?k.includes(e)?k.filter(r=>r!==e):[...k,e]:k.includes(e)?[]:[e];C(l),y?.(l)})(e.id,r),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})}),R.map(t=>n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 "+("center"===t.align?"text-center":"right"===t.align?"text-right":"text-left"),children:S(t,e,r)},t.key))]},e.id)})})]})})},e.NameField=i,e.TextField=o});
//# sourceMappingURL=ui-react-components.umd.js.map
